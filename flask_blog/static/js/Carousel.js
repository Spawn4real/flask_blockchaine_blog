(function(a){if(a===undefined){return}var b={num:3,maxWidth:250,maxHeight:150,autoPlay:true,showTime:1000,animationTime:300,scale:0.9,distance:15,};function e(k,h){var l=[];for(var j=0;j<k;j++){if(j<=(k-1)/2){l.push(j)}else{l.push((k-1)/2-j)}}if(h==="left"){l.reverse();return l}if(h==="right"){return l}}function g(h,k){if(h.data("isanimating")){return}var j=h.data("config");var m=(j.num-1)/2;var q,n,p;var u=h.data("totalNum");var s;var l,o;if(k==="left"){p=(h.data("index")-1+u)%u}else{if(k==="right"){p=(h.data("index")+1)%h.data("totalNum")}else{return}}var t=d(h);l=t.indexs[0];o=t.indexs[j.num-1];h.data("index",p);var r=d(h);var v=e(j.num,k);if(u===j.num){animationTimeForEdge=0}else{if(u-j.num===2){animationTimeForEdge=j.animationTime/2}else{animationTimeForEdge=j.animationTime}}h.find("ul li").each(function(w,i){n=r.hashIndexs[w];if(n!==undefined){q=Math.pow(j.scale,Math.abs(n-m));h.data("isanimating",true);a(i).css({display:"block","z-index":v[n]+9999}).animate({width:q*j.maxWidth,height:q*j.maxHeight,left:n*j.distance+(1-q)*j.maxWidth*Number(n>m),top:(1-q)*j.maxHeight/2},j.animationTime,function(){h.data("isanimating",false)})}else{q=Math.pow(j.scale,m);s={display:"none",left:m*j.distance+(1-q)*j.maxWidth/2,top:0};if(k==="left"&&w===o){a(i).css("z-index",-1).animate({left:"-="+j.distance+"px"},j.animationTime,function(){a(i).css(s)})}else{if(k==="right"&&w===l){a(i).css("z-index",-1).animate({left:"+="+j.distance+"px"},j.animationTime,function(){a(i).css(s)})}else{a(i).css({display:"none",width:q*j.maxWidth,height:q*j.maxHeight,left:m*j.distance+(1-q)*j.maxWidth/2,top:0})}}}})}function c(i){var h=null;if(typeof i==="object"&&i!==null){h={};for(var j in b){if(b.hasOwnProperty(j)){h[j]=b[j]}}for(j in i){if(i.hasOwnProperty(j)&&h.hasOwnProperty(j)){h[j]=i[j]}}}return h}function d(h){var n=[];var o;var k=(h.data("config").num-1)/2;var j=h.data("index")||0;var p=h.data("totalNum")||0;for(var m=-k;m<=k;m++){o=j+m;n.push((o<0?(o+p):o)%p)}var l={};for(m=0;m<n.length;m++){l[n[m]]=m}return{indexs:n,hashIndexs:l}}function f(h){var o=d(h);var p=9999;var n;var i=h.data("config");var l=(i.num-1)/2;var m=l*i.distance*2+i.maxWidth;var k=h.width();var j=h.height();if(k<m){h.width(m)}if(j<i.maxHeight){h.height(i.maxHeight)}h.find("ul li img").css({width:"100%",height:"100%"});h.find("ul").css({position:"relative",width:m,height:i.maxHeight,"list-style":"none",padding:0,margin:0,marginLeft:"50%",left:-m/2,top:(h.height()-i.maxHeight)/2});h.find(".left").css({position:"absolute",left:10,top:"50%","z-index":9999+h.data("totalNum")+1});h.find(".right").css({position:"absolute",right:10,top:"50%","z-index":9999+h.data("totalNum")+1});h.find("ul li").each(function(s,q){var r=o.hashIndexs[s];if(r!==undefined){n=Math.pow(i.scale,Math.abs(r-l));p=9999+(r>l?(i.num-1-r):r);a(q).css({display:"block",position:"absolute","z-index":p,overflow:"hidden",width:n*i.maxWidth,height:n*i.maxHeight,left:r*i.distance+(1-n)*i.maxWidth*Number(r>l),top:(1-n)*i.maxHeight/2})}else{n=Math.pow(i.scale,l);a(q).css({display:"none",position:"absolute",overflow:"hidden",width:n*i.maxWidth,height:n*i.maxHeight,left:l*i.distance+(1-n)*i.maxWidth/2,top:0})}})}a.fn.carousel=function(j){var i;var k;var h;a(this).each(function(l,m){h=a(m);if(typeof j==="object"&&j!==null){i=c(j);k=h.find("ul li").length;if(k<=0||k%2===0){return}if(i.num<=0||i.num>k){i.num=k}h.data("config",i);h.data("index",0);h.data("totalNum",k);f(h);h.find(".left").off("click").on("click",(function(n){return function(){g(n,"left")}})(h));h.find(".right").off("click").on("click",(function(n){return function(){g(n,"right")}})(h));(function(n){var o;clearInterval(n.data("auto"));if(n.data("config").autoPlay){o=setInterval(function(){g(n,"right")},n.data("config").showTime);n.data("auto",o);n.find("ul").off("mouseenter").on("mouseenter",function(){clearInterval(n.data("auto"))}).off("mouseleave").on("mouseleave",function(){o=setInterval(function(){g(n,"right")},n.data("config").showTime);n.data("auto",o)})}else{n.find("ul").off("mouseenter").off("mouseleave")}})(h)}})}})(jQuery);